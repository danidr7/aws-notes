
# Simple Storage Service

A safe place to store files.

- Object based
	- key: the object name
	- value: the object content
	- version ID: the object version (when versioning)
	- metadata: some metadata about the object
	- sub-resources: ACL (Access Control Lists) and torrent
- files from 0 bytes to 5TB
- Bucket is like a namespace
- The Bucket must be an universal unique name
	- it'll create a web address like (https://danidr7.s3.amazonaws.com/)
- HTTP 200 code is the return when upload successfully
- New object are immediately available
- DELETE and PUT existent objects could happens an eventual consistency (can take some time to propagate)
- Control access to buckets with ACL or Polices

## Charges

- Storage
- Requests and data retrievals
- Storage
- Storage Management Princing
- Data Transfer
- Transfer acceleration
- Cross Region Replication

## Storage classes

- S3 Standard
	- 99.99% availability
	- 99.999999999% durability (11 nines)
	- more expensive
	- no retrieval fee
	- price: $0.021 - $0.023
- s3 Intelligent Tearing
	- using machine learning to move objects around the different tiers
	- helps to save money
	- no retrieval fee
	- price: distributed over different classes + monitoring and automation cost
- S3 IA (Infrequently Accessed)
	- data less frequently accessed
	- rapid access
	- lower fee than s3, but the retrieval are charged
	- fee per GB retrieved
	- price: $0.0125 per GB
- S3 One Zone IA (similar to S3 RRS - reduce redundancy storage)
	- 99.5% designed for availability
	- 99% SLA availability
	- data less frequently accessed
	- lower cost
	- no multiple AZ
	- fee per GB retrieved
	- price: $0.01 per GB
- s3 Glacier
	- for data archiving
	- configurable retrieval time (from minutes to hours)
	- fee per GB retrieved
	- price: $0.004 per GB
- s3 Glacier Deep Archive
	- for data archiving
	- the lowest cost
	- retrieve time of 12 hours
	- fee per GB retrieved
	- price: $0.00099 per GB

## Security & encription

- new buckets are private as default
	- it can be changed by ACL or Bucket Policies
- achieved by SSL/TLS

- Encryption ways:
	- SSE-S3 (Server Side Encryption, AWS manage the keys)
	- KMS (Key Managemente Service, AWS and user manage the keys)
	- SSE-C (Server Side Encryption With Customer, the user provide the keys to AWS)
	- Client Side Encryption (user upload the file already encrypted)

## Version Control

- must be enable in the bucket
- If enabled, it can not be disabled, only suspended
- stores all versions of an object (even if deleted)
- option for active MFA when delete

## Lifecycle rule

- allows to automate moving objects between tiers according to configurable rules
- can be used with versioning (for previous and current objects)

## S3 object lock

- store objects using a write once, read many (WORM) model
- prevent deletion and modifications for a fixed time or indefinitely
- can be individual objects or all the bucket

There are 2 modes:
- Governance Mode
	- users can't overwrite os delete an object
	- the permission can be changed for users
- Compliance Mode
	- version can't be overwritten or deleted by any user
	- retention mode can't be changed (retention is the time that the version will be protected, after that the object can be changed/deleted)

S3 Glacier Vault Lock
- 	Allows specify controls in a vault lock policy and lock the policy from future edits.

More about: https://www.amazonaws.cn/en/s3/faqs/